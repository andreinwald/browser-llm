(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var de,v,tr,B,St,rr,nr,or,it,qe,Ke,ir,ae={},ur=[],Jr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pe=Array.isArray;function U(e,t){for(var r in t)e[r]=t[r];return e}function ut(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function A(e,t,r){var n,o,i,u={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:u[i]=t[i];if(arguments.length>2&&(u.children=arguments.length>3?de.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)u[i]===void 0&&(u[i]=e.defaultProps[i]);return se(e,u,n,o,null)}function se(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++tr,__i:-1,__u:0};return o==null&&v.vnode!=null&&v.vnode(i),i}function cr(){return{current:null}}function I(e){return e.children}function D(e,t){this.props=e,this.context=t}function te(e,t){if(t==null)return e.__?te(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?te(e):null}function sr(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return sr(e)}}function Ge(e){(!e.__d&&(e.__d=!0)&&B.push(e)&&!ge.__r++||St!=v.debounceRendering)&&((St=v.debounceRendering)||rr)(ge)}function ge(){for(var e,t,r,n,o,i,u,c=1;B.length;)B.length>c&&B.sort(nr),e=B.shift(),c=B.length,e.__d&&(r=void 0,o=(n=(t=e).__v).__e,i=[],u=[],t.__P&&((r=U({},n)).__v=n.__v+1,v.vnode&&v.vnode(r),ct(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[o]:null,i,o??te(n),!!(32&n.__u),u),r.__v=n.__v,r.__.__k[r.__i]=r,fr(i,r,u),r.__e!=o&&sr(r)));ge.__r=0}function lr(e,t,r,n,o,i,u,c,l,a,f){var s,d,_,h,C,y,p=n&&n.__k||ur,m=t.length;for(l=en(r,t,p,l,m),s=0;s<m;s++)(_=r.__k[s])!=null&&(d=_.__i==-1?ae:p[_.__i]||ae,_.__i=s,y=ct(e,_,d,o,i,u,c,l,a,f),h=_.__e,_.ref&&d.ref!=_.ref&&(d.ref&&st(d.ref,null,_),f.push(_.ref,_.__c||h,_)),C==null&&h!=null&&(C=h),4&_.__u||d.__k===_.__k?l=ar(_,l,e):typeof _.type=="function"&&y!==void 0?l=y:h&&(l=h.nextSibling),_.__u&=-7);return r.__e=C,l}function en(e,t,r,n,o){var i,u,c,l,a,f=r.length,s=f,d=0;for(e.__k=new Array(o),i=0;i<o;i++)(u=t[i])!=null&&typeof u!="boolean"&&typeof u!="function"?(l=i+d,(u=e.__k[i]=typeof u=="string"||typeof u=="number"||typeof u=="bigint"||u.constructor==String?se(null,u,null,null,null):pe(u)?se(I,{children:u},null,null,null):u.constructor==null&&u.__b>0?se(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u).__=e,u.__b=e.__b+1,c=null,(a=u.__i=tn(u,r,l,s))!=-1&&(s--,(c=r[a])&&(c.__u|=2)),c==null||c.__v==null?(a==-1&&(o>f?d--:o<f&&d++),typeof u.type!="function"&&(u.__u|=4)):a!=l&&(a==l-1?d--:a==l+1?d++:(a>l?d--:d++,u.__u|=4))):e.__k[i]=null;if(s)for(i=0;i<f;i++)(c=r[i])!=null&&(2&c.__u)==0&&(c.__e==n&&(n=te(c)),dr(c,c));return n}function ar(e,t,r){var n,o;if(typeof e.type=="function"){for(n=e.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=e,t=ar(n[o],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=te(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function L(e,t){return t=t||[],e==null||typeof e=="boolean"||(pe(e)?e.some(function(r){L(r,t)}):t.push(e)),t}function tn(e,t,r,n){var o,i,u,c=e.key,l=e.type,a=t[r],f=a!=null&&(2&a.__u)==0;if(a===null&&e.key==null||f&&c==a.key&&l==a.type)return r;if(n>(f?1:0)){for(o=r-1,i=r+1;o>=0||i<t.length;)if((a=t[u=o>=0?o--:i++])!=null&&(2&a.__u)==0&&c==a.key&&l==a.type)return u}return-1}function Ct(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Jr.test(t)?r:r+"px"}function ye(e,t,r,n,o){var i,u;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Ct(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||Ct(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(or,"$1")),u=t.toLowerCase(),t=u in e||t=="onFocusOut"||t=="onFocusIn"?u.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=it,e.addEventListener(t,i?Ke:qe,i)):e.removeEventListener(t,i?Ke:qe,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function Et(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=it++;else if(t.t<r.u)return;return r(v.event?v.event(t):t)}}}function ct(e,t,r,n,o,i,u,c,l,a){var f,s,d,_,h,C,y,p,m,b,g,w,P,O,k,j,ue,$=t.type;if(t.constructor!=null)return null;128&r.__u&&(l=!!(32&r.__u),i=[c=t.__e=r.__e]),(f=v.__b)&&f(t);e:if(typeof $=="function")try{if(p=t.props,m="prototype"in $&&$.prototype.render,b=(f=$.contextType)&&n[f.__c],g=f?b?b.props.value:f.__:n,r.__c?y=(s=t.__c=r.__c).__=s.__E:(m?t.__c=s=new $(p,g):(t.__c=s=new D(p,g),s.constructor=$,s.render=nn),b&&b.sub(s),s.props=p,s.state||(s.state={}),s.context=g,s.__n=n,d=s.__d=!0,s.__h=[],s._sb=[]),m&&s.__s==null&&(s.__s=s.state),m&&$.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=U({},s.__s)),U(s.__s,$.getDerivedStateFromProps(p,s.__s))),_=s.props,h=s.state,s.__v=t,d)m&&$.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),m&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(m&&$.getDerivedStateFromProps==null&&p!==_&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(p,g),!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(p,s.__s,g)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(s.props=p,s.state=s.__s,s.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(Y){Y&&(Y.__=t)}),w=0;w<s._sb.length;w++)s.__h.push(s._sb[w]);s._sb=[],s.__h.length&&u.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(p,s.__s,g),m&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(_,h,C)})}if(s.context=g,s.props=p,s.__P=e,s.__e=!1,P=v.__r,O=0,m){for(s.state=s.__s,s.__d=!1,P&&P(t),f=s.render(s.props,s.state,s.context),k=0;k<s._sb.length;k++)s.__h.push(s._sb[k]);s._sb=[]}else do s.__d=!1,P&&P(t),f=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++O<25);s.state=s.__s,s.getChildContext!=null&&(n=U(U({},n),s.getChildContext())),m&&!d&&s.getSnapshotBeforeUpdate!=null&&(C=s.getSnapshotBeforeUpdate(_,h)),j=f,f!=null&&f.type===I&&f.key==null&&(j=_r(f.props.children)),c=lr(e,pe(j)?j:[j],t,r,n,o,i,u,c,l,a),s.base=t.__e,t.__u&=-161,s.__h.length&&u.push(s),y&&(s.__E=s.__=null)}catch(Y){if(t.__v=null,l||i!=null)if(Y.then){for(t.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else{for(ue=i.length;ue--;)ut(i[ue]);Xe(t)}else t.__e=r.__e,t.__k=r.__k,Y.then||Xe(t);v.__e(Y,t,r)}else i==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):c=t.__e=rn(r.__e,t,r,n,o,i,u,l,a);return(f=v.diffed)&&f(t),128&t.__u?void 0:c}function Xe(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Xe)}function fr(e,t,r){for(var n=0;n<r.length;n++)st(r[n],r[++n],r[++n]);v.__c&&v.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){v.__e(i,o.__v)}})}function _r(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:pe(e)?e.map(_r):U({},e)}function rn(e,t,r,n,o,i,u,c,l){var a,f,s,d,_,h,C,y=r.props,p=t.props,m=t.type;if(m=="svg"?o="http://www.w3.org/2000/svg":m=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(a=0;a<i.length;a++)if((_=i[a])&&"setAttribute"in _==!!m&&(m?_.localName==m:_.nodeType==3)){e=_,i[a]=null;break}}if(e==null){if(m==null)return document.createTextNode(p);e=document.createElementNS(o,m,p.is&&p),c&&(v.__m&&v.__m(t,i),c=!1),i=null}if(m==null)y===p||c&&e.data==p||(e.data=p);else{if(i=i&&de.call(e.childNodes),y=r.props||ae,!c&&i!=null)for(y={},a=0;a<e.attributes.length;a++)y[(_=e.attributes[a]).name]=_.value;for(a in y)if(_=y[a],a!="children"){if(a=="dangerouslySetInnerHTML")s=_;else if(!(a in p)){if(a=="value"&&"defaultValue"in p||a=="checked"&&"defaultChecked"in p)continue;ye(e,a,null,_,o)}}for(a in p)_=p[a],a=="children"?d=_:a=="dangerouslySetInnerHTML"?f=_:a=="value"?h=_:a=="checked"?C=_:c&&typeof _!="function"||y[a]===_||ye(e,a,_,y[a],o);if(f)c||s&&(f.__html==s.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(s&&(e.innerHTML=""),lr(t.type=="template"?e.content:e,pe(d)?d:[d],t,r,n,m=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,u,i?i[0]:r.__k&&te(r,0),c,l),i!=null)for(a=i.length;a--;)ut(i[a]);c||(a="value",m=="progress"&&h==null?e.removeAttribute("value"):h!=null&&(h!==e[a]||m=="progress"&&!h||m=="option"&&h!=y[a])&&ye(e,a,h,y[a],o),a="checked",C!=null&&C!=e[a]&&ye(e,a,C,y[a],o))}return e}function st(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(o){v.__e(o,r)}}function dr(e,t,r){var n,o;if(v.unmount&&v.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||st(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){v.__e(i,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&dr(n[o],t,r||typeof e.type!="function");r||ut(e.__e),e.__c=e.__=e.__e=void 0}function nn(e,t,r){return this.constructor(e,r)}function re(e,t,r){var n,o,i,u;t==document&&(t=document.documentElement),v.__&&v.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],u=[],ct(t,e=(!n&&r||t).__k=A(I,null,[e]),o||ae,ae,t.namespaceURI,!n&&r?[r]:o?null:t.firstChild?de.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,u),fr(i,e,u)}function pr(e,t){re(e,t,pr)}function on(e,t,r){var n,o,i,u,c=U({},e.props);for(i in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)i=="key"?n=t[i]:i=="ref"?o=t[i]:c[i]=t[i]===void 0&&u!=null?u[i]:t[i];return arguments.length>2&&(c.children=arguments.length>3?de.call(arguments,2):r),se(e.type,c,n||e.key,o||e.ref,null)}function Z(e){function t(r){var n,o;return this.getChildContext||(n=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&n.forEach(function(u){u.__e=!0,Ge(u)})},this.sub=function(i){n.add(i);var u=i.componentWillUnmount;i.componentWillUnmount=function(){n&&n.delete(i),u&&u.call(i)}}),r.children}return t.__c="__cC"+ir++,t.__=e,t.Provider=t.__l=(t.Consumer=function(r,n){return r.children(n)}).contextType=t,t}de=ur.slice,v={__e:function(e,t,r,n){for(var o,i,u;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),u=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),u=o.__d),u)return o.__E=o}catch(c){e=c}throw e}},tr=0,D.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof e=="function"&&(e=e(U({},r),this.props)),e&&U(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ge(this))},D.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ge(this))},D.prototype.render=I,B=[],rr=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nr=function(e,t){return e.__v.__b-t.__v.__b},ge.__r=0,or=/(PointerCapture)$|Capture$/i,it=0,qe=Et(!1),Ke=Et(!0),ir=0;var un=0;function x(e,t,r,n,o,i){t||(t={});var u,c,l=t;if("ref"in l)for(c in l={},t)c=="ref"?u=t[c]:l[c]=t[c];var a={type:e,props:l,key:r,ref:u,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--un,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(u=e.defaultProps))for(c in u)l[c]===void 0&&(l[c]=u[c]);return v.vnode&&v.vnode(a),a}const cn="modulepreload",sn=function(e){return"/browser-llm/"+e},Pt={},ln=function(t,r,n){let o=Promise.resolve();if(r&&r.length>0){let a=function(f){return Promise.all(f.map(s=>Promise.resolve(s).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};var u=a;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),l=c?.nonce||c?.getAttribute("nonce");o=a(r.map(f=>{if(f=sn(f),f in Pt)return;Pt[f]=!0;const s=f.endsWith(".css"),d=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${d}`))return;const _=document.createElement("link");if(_.rel=s?"stylesheet":cn,s||(_.as="script"),_.crossOrigin="",_.href=f,l&&_.setAttribute("nonce",l),document.head.appendChild(_),s)return new Promise((h,C)=>{_.addEventListener("load",h),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return o.then(c=>{for(const l of c||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function R(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var an=typeof Symbol=="function"&&Symbol.observable||"@@observable",kt=an,Ue=()=>Math.random().toString(36).substring(7).split("").join("."),fn={INIT:`@@redux/INIT${Ue()}`,REPLACE:`@@redux/REPLACE${Ue()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ue()}`},we=fn;function lt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function hr(e,t,r){if(typeof e!="function")throw new Error(R(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(R(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(R(1));return r(hr)(e,t)}let n=e,o=t,i=new Map,u=i,c=0,l=!1;function a(){u===i&&(u=new Map,i.forEach((y,p)=>{u.set(p,y)}))}function f(){if(l)throw new Error(R(3));return o}function s(y){if(typeof y!="function")throw new Error(R(4));if(l)throw new Error(R(5));let p=!0;a();const m=c++;return u.set(m,y),function(){if(p){if(l)throw new Error(R(6));p=!1,a(),u.delete(m),i=null}}}function d(y){if(!lt(y))throw new Error(R(7));if(typeof y.type>"u")throw new Error(R(8));if(typeof y.type!="string")throw new Error(R(17));if(l)throw new Error(R(9));try{l=!0,o=n(o,y)}finally{l=!1}return(i=u).forEach(m=>{m()}),y}function _(y){if(typeof y!="function")throw new Error(R(10));n=y,d({type:we.REPLACE})}function h(){const y=s;return{subscribe(p){if(typeof p!="object"||p===null)throw new Error(R(11));function m(){const g=p;g.next&&g.next(f())}return m(),{unsubscribe:y(m)}},[kt](){return this}}}return d({type:we.INIT}),{dispatch:d,subscribe:s,getState:f,replaceReducer:_,[kt]:h}}function _n(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:we.INIT})>"u")throw new Error(R(12));if(typeof r(void 0,{type:we.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(R(13))})}function dn(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const u=t[i];typeof e[u]=="function"&&(r[u]=e[u])}const n=Object.keys(r);let o;try{_n(r)}catch(i){o=i}return function(u={},c){if(o)throw o;let l=!1;const a={};for(let f=0;f<n.length;f++){const s=n[f],d=r[s],_=u[s],h=d(_,c);if(typeof h>"u")throw c&&c.type,new Error(R(14));a[s]=h,l=l||h!==_}return l=l||n.length!==Object.keys(u).length,l?a:u}}function Se(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function pn(...e){return t=>(r,n)=>{const o=t(r,n);let i=()=>{throw new Error(R(15))};const u={getState:o.getState,dispatch:(l,...a)=>i(l,...a)},c=e.map(l=>l(u));return i=Se(...c)(o.dispatch),{...o,dispatch:i}}}function hn(e){return lt(e)&&"type"in e&&typeof e.type=="string"}var yr=Symbol.for("immer-nothing"),xt=Symbol.for("immer-draftable"),N=Symbol.for("immer-state");function T(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ne=Object.getPrototypeOf;function V(e){return!!e&&!!e[N]}function H(e){return e?mr(e)||Array.isArray(e)||!!e[xt]||!!e.constructor?.[xt]||Oe(e)||Ne(e):!1}var yn=Object.prototype.constructor.toString();function mr(e){if(!e||typeof e!="object")return!1;const t=ne(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===yn}function Ce(e,t){Re(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Re(e){const t=e[N];return t?t.type_:Array.isArray(e)?1:Oe(e)?2:Ne(e)?3:0}function Qe(e,t){return Re(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vr(e,t,r){const n=Re(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function mn(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Oe(e){return e instanceof Map}function Ne(e){return e instanceof Set}function z(e){return e.copy_||e.base_}function Ye(e,t){if(Oe(e))return new Map(e);if(Ne(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=mr(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[N];let o=Reflect.ownKeys(n);for(let i=0;i<o.length;i++){const u=o[i],c=n[u];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[u]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[u]})}return Object.create(ne(e),n)}else{const n=ne(e);if(n!==null&&r)return{...e};const o=Object.create(n);return Object.assign(o,e)}}function at(e,t=!1){return Me(e)||V(e)||!H(e)||(Re(e)>1&&(e.set=e.add=e.clear=e.delete=vn),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>at(n,!0))),e}function vn(){T(2)}function Me(e){return Object.isFrozen(e)}var bn={};function q(e){const t=bn[e];return t||T(0,e),t}var fe;function br(){return fe}function gn(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Rt(e,t){t&&(q("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ze(e){Je(e),e.drafts_.forEach(wn),e.drafts_=null}function Je(e){e===fe&&(fe=e.parent_)}function Ot(e){return fe=gn(fe,e)}function wn(e){const t=e[N];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Nt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[N].modified_&&(Ze(t),T(4)),H(e)&&(e=Ee(t,e),t.parent_||Pe(t,e)),t.patches_&&q("Patches").generateReplacementPatches_(r[N].base_,e,t.patches_,t.inversePatches_)):e=Ee(t,r,[]),Ze(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yr?e:void 0}function Ee(e,t,r){if(Me(t))return t;const n=t[N];if(!n)return Ce(t,(o,i)=>Mt(e,n,t,o,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Pe(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const o=n.copy_;let i=o,u=!1;n.type_===3&&(i=new Set(o),o.clear(),u=!0),Ce(i,(c,l)=>Mt(e,n,o,c,l,r,u)),Pe(e,o,!1),r&&e.patches_&&q("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Mt(e,t,r,n,o,i,u){if(V(o)){const c=i&&t&&t.type_!==3&&!Qe(t.assigned_,n)?i.concat(n):void 0,l=Ee(e,o,c);if(vr(r,n,l),V(l))e.canAutoFreeze_=!1;else return}else u&&r.add(o);if(H(o)&&!Me(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Ee(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Pe(e,o)}}function Pe(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&at(t,r)}function Sn(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:br(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,i=ft;r&&(o=[n],i=_e);const{revoke:u,proxy:c}=Proxy.revocable(o,i);return n.draft_=c,n.revoke_=u,c}var ft={get(e,t){if(t===N)return e;const r=z(e);if(!Qe(r,t))return Cn(e,r,t);const n=r[t];return e.finalized_||!H(n)?n:n===Le(e.base_,t)?(Fe(e),e.copy_[t]=tt(n,e)):n},has(e,t){return t in z(e)},ownKeys(e){return Reflect.ownKeys(z(e))},set(e,t,r){const n=gr(z(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const o=Le(z(e),t),i=o?.[N];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(mn(r,o)&&(r!==void 0||Qe(e.base_,t)))return!0;Fe(e),et(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Le(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Fe(e),et(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=z(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){T(11)},getPrototypeOf(e){return ne(e.base_)},setPrototypeOf(){T(12)}},_e={};Ce(ft,(e,t)=>{_e[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_e.deleteProperty=function(e,t){return _e.set.call(this,e,t,void 0)};_e.set=function(e,t,r){return ft.set.call(this,e[0],t,r,e[0])};function Le(e,t){const r=e[N];return(r?z(r):e)[t]}function Cn(e,t,r){const n=gr(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function gr(e,t){if(!(t in e))return;let r=ne(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=ne(r)}}function et(e){e.modified_||(e.modified_=!0,e.parent_&&et(e.parent_))}function Fe(e){e.copy_||(e.copy_=Ye(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var En=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const u=this;return function(l=i,...a){return u.produce(l,f=>r.call(this,f,...a))}}typeof r!="function"&&T(6),n!==void 0&&typeof n!="function"&&T(7);let o;if(H(t)){const i=Ot(this),u=tt(t,void 0);let c=!0;try{o=r(u),c=!1}finally{c?Ze(i):Je(i)}return Rt(i,n),Nt(o,i)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===yr&&(o=void 0),this.autoFreeze_&&at(o,!0),n){const i=[],u=[];q("Patches").generateReplacementPatches_(t,o,i,u),n(i,u)}return o}else T(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(u,...c)=>this.produceWithPatches(u,l=>t(l,...c));let n,o;return[this.produce(t,r,(u,c)=>{n=u,o=c}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){H(e)||T(8),V(e)&&(e=Pn(e));const t=Ot(this),r=tt(e,void 0);return r[N].isManual_=!0,Je(t),r}finishDraft(e,t){const r=e&&e[N];(!r||!r.isManual_)&&T(9);const{scope_:n}=r;return Rt(n,t),Nt(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));const n=q("Patches").applyPatches_;return V(e)?n(e,t):this.produce(e,o=>n(o,t))}};function tt(e,t){const r=Oe(e)?q("MapSet").proxyMap_(e,t):Ne(e)?q("MapSet").proxySet_(e,t):Sn(e,t);return(t?t.scope_:br()).drafts_.push(r),r}function Pn(e){return V(e)||T(10,e),wr(e)}function wr(e){if(!H(e)||Me(e))return e;const t=e[N];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ye(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ye(e,!0);return Ce(r,(n,o)=>{vr(r,n,wr(o))}),t&&(t.finalized_=!1),r}var M=new En,Sr=M.produce;M.produceWithPatches.bind(M);M.setAutoFreeze.bind(M);M.setUseStrictShallowCopy.bind(M);M.applyPatches.bind(M);M.createDraft.bind(M);M.finishDraft.bind(M);function Cr(e){return({dispatch:r,getState:n})=>o=>i=>typeof i=="function"?i(r,n,e):o(i)}var kn=Cr(),xn=Cr,Rn=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Se:Se.apply(null,arguments)};function $t(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(F(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>hn(n)&&n.type===e,r}var Er=class ce extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ce.prototype)}static get[Symbol.species](){return ce}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ce(...t[0].concat(this)):new ce(...t.concat(this))}};function Tt(e){return H(e)?Sr(e,()=>{}):e}function me(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function On(e){return typeof e=="boolean"}var Nn=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:i=!0}=t??{};let u=new Er;return r&&(On(r)?u.push(kn):u.push(xn(r.extraArgument))),u},Mn="RTK_autoBatch",Dt=e=>t=>{setTimeout(t,e)},$n=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let o=!0,i=!1,u=!1;const c=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Dt(10):e.type==="callback"?e.queueNotification:Dt(e.timeout),a=()=>{u=!1,i&&(i=!1,c.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const s=()=>o&&f(),d=n.subscribe(s);return c.add(f),()=>{d(),c.delete(f)}},dispatch(f){try{return o=!f?.meta?.[Mn],i=!o,i&&(u||(u=!0,l(a))),n.dispatch(f)}finally{o=!0}}})},Tn=e=>function(r){const{autoBatch:n=!0}=r??{};let o=new Er(e);return n&&o.push($n(typeof n=="object"?n:void 0)),o};function Dn(e){const t=Nn(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:i=void 0,enhancers:u=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(lt(r))c=dn(r);else throw new Error(F(1));let l;typeof n=="function"?l=n(t):l=t();let a=Se;o&&(a=Rn({trace:!1,...typeof o=="object"&&o}));const f=pn(...l),s=Tn(f);let d=typeof u=="function"?u(s):s();const _=a(...d);return hr(c,i,_)}function Pr(e){const t={},r=[];let n;const o={addCase(i,u){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(F(28));if(c in t)throw new Error(F(29));return t[c]=u,o},addMatcher(i,u){return r.push({matcher:i,reducer:u}),o},addDefaultCase(i){return n=i,o}};return e(o),[t,r,n]}function An(e){return typeof e=="function"}function In(e,t){let[r,n,o]=Pr(t),i;if(An(e))i=()=>Tt(e());else{const c=Tt(e);i=()=>c}function u(c=i(),l){let a=[r[l.type],...n.filter(({matcher:f})=>f(l)).map(({reducer:f})=>f)];return a.filter(f=>!!f).length===0&&(a=[o]),a.reduce((f,s)=>{if(s)if(V(f)){const _=s(f,l);return _===void 0?f:_}else{if(H(f))return Sr(f,d=>s(d,l));{const d=s(f,l);if(d===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return f},c)}return u.getInitialState=i,u}var Un=Symbol.for("rtk-slice-createasyncthunk");function Ln(e,t){return`${e}/${t}`}function Fn({creators:e}={}){const t=e?.asyncThunk?.[Un];return function(n){const{name:o,reducerPath:i=o}=n;if(!o)throw new Error(F(11));const u=(typeof n.reducers=="function"?n.reducers(jn()):n.reducers)||{},c=Object.keys(u),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(b,g){const w=typeof b=="string"?b:b.type;if(!w)throw new Error(F(12));if(w in l.sliceCaseReducersByType)throw new Error(F(13));return l.sliceCaseReducersByType[w]=g,a},addMatcher(b,g){return l.sliceMatchers.push({matcher:b,reducer:g}),a},exposeAction(b,g){return l.actionCreators[b]=g,a},exposeCaseReducer(b,g){return l.sliceCaseReducersByName[b]=g,a}};c.forEach(b=>{const g=u[b],w={reducerName:b,type:Ln(o,b),createNotation:typeof n.reducers=="function"};Bn(g)?qn(w,g,a,t):zn(w,g,a)});function f(){const[b={},g=[],w=void 0]=typeof n.extraReducers=="function"?Pr(n.extraReducers):[n.extraReducers],P={...b,...l.sliceCaseReducersByType};return In(n.initialState,O=>{for(let k in P)O.addCase(k,P[k]);for(let k of l.sliceMatchers)O.addMatcher(k.matcher,k.reducer);for(let k of g)O.addMatcher(k.matcher,k.reducer);w&&O.addDefaultCase(w)})}const s=b=>b,d=new Map,_=new WeakMap;let h;function C(b,g){return h||(h=f()),h(b,g)}function y(){return h||(h=f()),h.getInitialState()}function p(b,g=!1){function w(O){let k=O[b];return typeof k>"u"&&g&&(k=me(_,w,y)),k}function P(O=s){const k=me(d,g,()=>new WeakMap);return me(k,O,()=>{const j={};for(const[ue,$]of Object.entries(n.selectors??{}))j[ue]=Hn($,O,()=>me(_,O,y),g);return j})}return{reducerPath:b,getSelectors:P,get selectors(){return P(w)},selectSlice:w}}const m={name:o,reducer:C,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...p(i),injectInto(b,{reducerPath:g,...w}={}){const P=g??i;return b.inject({reducerPath:P,reducer:C},w),{...m,...p(P,!0)}}};return m}}function Hn(e,t,r,n){function o(i,...u){let c=t(i);return typeof c>"u"&&n&&(c=r()),e(c,...u)}return o.unwrapped=e,o}var Wn=Fn();function jn(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function zn({type:e,reducerName:t,createNotation:r},n,o){let i,u;if("reducer"in n){if(r&&!Vn(n))throw new Error(F(17));i=n.reducer,u=n.prepare}else i=n;o.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,u?$t(e,u):$t(e))}function Bn(e){return e._reducerDefinitionType==="asyncThunk"}function Vn(e){return e._reducerDefinitionType==="reducerWithPrepare"}function qn({type:e,reducerName:t},r,n,o){if(!o)throw new Error(F(18));const{payloadCreator:i,fulfilled:u,pending:c,rejected:l,settled:a,options:f}=r,s=o(e,i,f);n.exposeAction(t,s),u&&n.addCase(s.fulfilled,u),c&&n.addCase(s.pending,c),l&&n.addCase(s.rejected,l),a&&n.addMatcher(s.settled,a),n.exposeCaseReducer(t,{fulfilled:u||ve,pending:c||ve,rejected:l||ve,settled:a||ve})}function ve(){}function F(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const Kn={messageHistory:[],downloadStatus:""},kr=Wn({name:"llm",initialState:Kn,reducers:{setMessageHistory:(e,{payload:t})=>{e.messageHistory=t},setDownloadStatus:(e,{payload:t})=>{e.downloadStatus=t}}}),{setMessageHistory:He,setDownloadStatus:We}=kr.actions,Gn=kr.reducer;var W,S,je,At,oe=0,xr=[],E=v,It=E.__b,Ut=E.__r,Lt=E.diffed,Ft=E.__c,Ht=E.unmount,Wt=E.__;function X(e,t){E.__h&&E.__h(S,e,oe||t),oe=0;var r=S.__H||(S.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function K(e){return oe=1,$e(Rr,e)}function $e(e,t,r){var n=X(W++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Rr(void 0,t),function(c){var l=n.__N?n.__N[0]:n.__[0],a=n.t(l,c);l!==a&&(n.__N=[a,n.__[1]],n.__c.setState({}))}],n.__c=S,!S.__f)){var o=function(c,l,a){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!i||i.call(this,c,l,a);var s=n.__c.props!==c;return f.forEach(function(d){if(d.__N){var _=d.__[0];d.__=d.__N,d.__N=void 0,_!==d.__[0]&&(s=!0)}}),i&&i.call(this,c,l,a)||s};S.__f=!0;var i=S.shouldComponentUpdate,u=S.componentWillUpdate;S.componentWillUpdate=function(c,l,a){if(this.__e){var f=i;i=void 0,o(c,l,a),i=f}u&&u.call(this,c,l,a)},S.shouldComponentUpdate=o}return n.__N||n.__}function ie(e,t){var r=X(W++,3);!E.__s&&pt(r.__H,t)&&(r.__=e,r.u=t,S.__H.__h.push(r))}function Q(e,t){var r=X(W++,4);!E.__s&&pt(r.__H,t)&&(r.__=e,r.u=t,S.__h.push(r))}function Te(e){return oe=5,G(function(){return{current:e}},[])}function _t(e,t,r){oe=6,Q(function(){if(typeof e=="function"){var n=e(t());return function(){e(null),n&&typeof n=="function"&&n()}}if(e)return e.current=t(),function(){return e.current=null}},r==null?r:r.concat(e))}function G(e,t){var r=X(W++,7);return pt(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function De(e,t){return oe=8,G(function(){return e},t)}function Ae(e){var t=S.context[e.__c],r=X(W++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(S)),t.props.value):e.__}function Ie(e,t){E.useDebugValue&&E.useDebugValue(t?t(e):e)}function Xn(e){var t=X(W++,10),r=K();return t.__=e,S.componentDidCatch||(S.componentDidCatch=function(n,o){t.__&&t.__(n,o),r[1](n)}),[r[0],function(){r[1](void 0)}]}function dt(){var e=X(W++,11);if(!e.__){for(var t=S.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function Qn(){for(var e;e=xr.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(be),e.__H.__h.forEach(rt),e.__H.__h=[]}catch(t){e.__H.__h=[],E.__e(t,e.__v)}}E.__b=function(e){S=null,It&&It(e)},E.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Wt&&Wt(e,t)},E.__r=function(e){Ut&&Ut(e),W=0;var t=(S=e.__c).__H;t&&(je===S?(t.__h=[],S.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(be),t.__h.forEach(rt),t.__h=[],W=0)),je=S},E.diffed=function(e){Lt&&Lt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(xr.push(t)!==1&&At===E.requestAnimationFrame||((At=E.requestAnimationFrame)||Yn)(Qn)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),je=S=null},E.__c=function(e,t){t.some(function(r){try{r.__h.forEach(be),r.__h=r.__h.filter(function(n){return!n.__||rt(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],E.__e(n,r.__v)}}),Ft&&Ft(e,t)},E.unmount=function(e){Ht&&Ht(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{be(n)}catch(o){t=o}}),r.__H=void 0,t&&E.__e(t,r.__v))};var jt=typeof requestAnimationFrame=="function";function Yn(e){var t,r=function(){clearTimeout(n),jt&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);jt&&(t=requestAnimationFrame(r))}function be(e){var t=S,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),S=t}function rt(e){var t=S;e.__c=e.__(),S=t}function pt(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Rr(e,t){return typeof t=="function"?t(e):t}function Or(e,t){for(var r in t)e[r]=t[r];return e}function nt(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function ht(e,t){var r=t(),n=K({t:{__:r,u:t}}),o=n[0].t,i=n[1];return Q(function(){o.__=r,o.u=t,ze(o)&&i({t:o})},[e,r,t]),ie(function(){return ze(o)&&i({t:o}),e(function(){ze(o)&&i({t:o})})},[e]),r}function ze(e){var t,r,n=e.u,o=e.__;try{var i=n();return!((t=o)===(r=i)&&(t!==0||1/t==1/r)||t!=t&&r!=r)}catch{return!0}}function yt(e){e()}function mt(e){return e}function vt(){return[!1,yt]}var bt=Q;function ke(e,t){this.props=e,this.context=t}function Nr(e,t){function r(o){var i=this.props.ref,u=i==o.ref;return!u&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!u:nt(this.props,o)}function n(o){return this.shouldComponentUpdate=r,A(e,o)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(ke.prototype=new D).isPureReactComponent=!0,ke.prototype.shouldComponentUpdate=function(e,t){return nt(this.props,e)||nt(this.state,t)};var zt=v.__b;v.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),zt&&zt(e)};var Zn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Mr(e){function t(r){var n=Or({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=Zn,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Bt=function(e,t){return e==null?null:L(L(e).map(t))},$r={map:Bt,forEach:Bt,count:function(e){return e?L(e).length:0},only:function(e){var t=L(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:L},Jn=v.__e;v.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}Jn(e,t,r,n)};var Vt=v.unmount;function Tr(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Or({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Tr(n,t,r)})),e}function Dr(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Dr(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function le(){this.__u=0,this.o=null,this.__b=null}function Ar(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ir(e){var t,r,n;function o(i){if(t||(t=e()).then(function(u){r=u.default||u},function(u){n=u}),n)throw n;if(!r)throw t;return A(r,i)}return o.displayName="Lazy",o.__f=!0,o}function J(){this.i=null,this.l=null}v.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Vt&&Vt(e)},(le.prototype=new D).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var o=Ar(n.__v),i=!1,u=function(){i||(i=!0,r.__R=null,o?o(c):c())};r.__R=u;var c=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=Dr(l,l.__c.__P,l.__c.__O)}var a;for(n.setState({__a:n.__b=null});a=n.o.pop();)a.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(u,u)},le.prototype.componentWillUnmount=function(){this.o=[]},le.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Tr(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&A(I,null,e.fallback);return o&&(o.__u&=-33),[A(I,null,t.__a?null:e.children),o]};var qt=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function eo(e){return this.getChildContext=function(){return e.context},e.children}function to(e){var t=this,r=e.h;if(t.componentWillUnmount=function(){re(null,t.v),t.v=null,t.h=null},t.h&&t.h!==r&&t.componentWillUnmount(),!t.v){for(var n=t.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;t.h=r,t.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(o,i){this.childNodes.push(o),t.h.insertBefore(o,i)},removeChild:function(o){this.childNodes.splice(this.childNodes.indexOf(o)>>>1,1),t.h.removeChild(o)}}}re(A(eo,{context:t.context},e.__v),t.v)}function Ur(e,t){var r=A(to,{__v:e,h:t});return r.containerInfo=t,r}(J.prototype=new D).__a=function(e){var t=this,r=Ar(t.__v),n=t.l.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),qt(t,e,n)):o()};r?r(i):i()}},J.prototype.render=function(e){this.i=null,this.l=new Map;var t=L(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},J.prototype.componentDidUpdate=J.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){qt(e,r,t)})};var Lr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ro=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,no=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,oo=/[A-Z0-9]/g,io=typeof document<"u",uo=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Fr(e,t,r){return t.__k==null&&(t.textContent=""),re(e,t),typeof r=="function"&&r(),e?e.__c:null}function Hr(e,t,r){return pr(e,t),typeof r=="function"&&r(),e?e.__c:null}D.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(D.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Kt=v.event;function co(){}function so(){return this.cancelBubble}function lo(){return this.defaultPrevented}v.event=function(e){return Kt&&(e=Kt(e)),e.persist=co,e.isPropagationStopped=so,e.isDefaultPrevented=lo,e.nativeEvent=e};var gt,ao={enumerable:!1,configurable:!0,get:function(){return this.class}},Gt=v.vnode;v.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,o={},i=n.indexOf("-")===-1;for(var u in r){var c=r[u];if(!(u==="value"&&"defaultValue"in r&&c==null||io&&u==="children"&&n==="noscript"||u==="class"||u==="className")){var l=u.toLowerCase();u==="defaultValue"&&"value"in r&&r.value==null?u="value":u==="download"&&c===!0?c="":l==="translate"&&c==="no"?c=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?u="ondblclick":l!=="onchange"||n!=="input"&&n!=="textarea"||uo(r.type)?l==="onfocus"?u="onfocusin":l==="onblur"?u="onfocusout":no.test(u)&&(u=l):l=u="oninput":i&&ro.test(u)?u=u.replace(oo,"-$&").toLowerCase():c===null&&(c=void 0),l==="oninput"&&o[u=l]&&(u="oninputCapture"),o[u]=c}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=L(r.children).forEach(function(a){a.props.selected=o.value.indexOf(a.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=L(r.children).forEach(function(a){a.props.selected=o.multiple?o.defaultValue.indexOf(a.props.value)!=-1:o.defaultValue==a.props.value})),r.class&&!r.className?(o.class=r.class,Object.defineProperty(o,"className",ao)):(r.className&&!r.class||r.class&&r.className)&&(o.class=o.className=r.className),t.props=o}(e),e.$$typeof=Lr,Gt&&Gt(e)};var Xt=v.__r;v.__r=function(e){Xt&&Xt(e),gt=e.__c};var Qt=v.diffed;v.diffed=function(e){Qt&&Qt(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value),gt=null};var Wr={ReactCurrentDispatcher:{current:{readContext:function(e){return gt.__n[e.__c].props.value},useCallback:De,useContext:Ae,useDebugValue:Ie,useDeferredValue:mt,useEffect:ie,useId:dt,useImperativeHandle:_t,useInsertionEffect:bt,useLayoutEffect:Q,useMemo:G,useReducer:$e,useRef:Te,useState:K,useSyncExternalStore:ht,useTransition:vt}}},fo="18.3.1";function jr(e){return A.bind(null,e)}function he(e){return!!e&&e.$$typeof===Lr}function zr(e){return he(e)&&e.type===I}function Br(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Vr(e){return he(e)?on.apply(null,arguments):e}function qr(e){return!!e.__k&&(re(null,e),!0)}function Kr(e){return e&&(e.base||e.nodeType===1&&e)||null}var Gr=function(e,t){return e(t)},Xr=function(e,t){return e(t)},Qr=I,Yr=he,_o={useState:K,useId:dt,useReducer:$e,useEffect:ie,useLayoutEffect:Q,useInsertionEffect:bt,useTransition:vt,useDeferredValue:mt,useSyncExternalStore:ht,startTransition:yt,useRef:Te,useImperativeHandle:_t,useMemo:G,useCallback:De,useContext:Ae,useDebugValue:Ie,version:"18.3.1",Children:$r,render:Fr,hydrate:Hr,unmountComponentAtNode:qr,createPortal:Ur,createElement:A,createContext:Z,createFactory:jr,cloneElement:Vr,createRef:cr,Fragment:I,isValidElement:he,isElement:Yr,isFragment:zr,isMemo:Br,findDOMNode:Kr,Component:D,PureComponent:ke,memo:Nr,forwardRef:Mr,flushSync:Xr,unstable_batchedUpdates:Gr,StrictMode:Qr,Suspense:le,SuspenseList:J,lazy:Ir,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wr};const po=Object.freeze(Object.defineProperty({__proto__:null,Children:$r,Component:D,Fragment:I,PureComponent:ke,StrictMode:Qr,Suspense:le,SuspenseList:J,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wr,cloneElement:Vr,createContext:Z,createElement:A,createFactory:jr,createPortal:Ur,createRef:cr,default:_o,findDOMNode:Kr,flushSync:Xr,forwardRef:Mr,hydrate:Hr,isElement:Yr,isFragment:zr,isMemo:Br,isValidElement:he,lazy:Ir,memo:Nr,render:Fr,startTransition:yt,unmountComponentAtNode:qr,unstable_batchedUpdates:Gr,useCallback:De,useContext:Ae,useDebugValue:Ie,useDeferredValue:mt,useEffect:ie,useErrorBoundary:Xn,useId:dt,useImperativeHandle:_t,useInsertionEffect:bt,useLayoutEffect:Q,useMemo:G,useReducer:$e,useRef:Te,useState:K,useSyncExternalStore:ht,useTransition:vt,version:fo},Symbol.toStringTag,{value:"Module"}));function ho(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var o=!1;try{o=this instanceof n}catch{}return o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var Be={exports:{}},Ve={};const yo=ho(po);/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt;function mo(){if(Yt)return Ve;Yt=1;var e=yo;function t(l,a){return l===a&&(l!==0||1/l===1/a)||l!==l&&a!==a}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,o=e.useRef,i=e.useEffect,u=e.useMemo,c=e.useDebugValue;return Ve.useSyncExternalStoreWithSelector=function(l,a,f,s,d){var _=o(null);if(_.current===null){var h={hasValue:!1,value:null};_.current=h}else h=_.current;_=u(function(){function y(w){if(!p){if(p=!0,m=w,w=s(w),d!==void 0&&h.hasValue){var P=h.value;if(d(P,w))return b=P}return b=w}if(P=b,r(m,w))return P;var O=s(w);return d!==void 0&&d(P,O)?(m=w,P):(m=w,b=O)}var p=!1,m,b,g=f===void 0?null:f;return[function(){return y(a())},g===null?void 0:function(){return y(g())}]},[a,f,s,d]);var C=n(l,_[0],_[1]);return i(function(){h.hasValue=!0,h.value=C},[C]),c(C),C},Ve}var Zt;function vo(){return Zt||(Zt=1,Be.exports=mo()),Be.exports}var bo=vo();function go(e){e()}function wo(){let e=null,t=null;return{clear(){e=null,t=null},notify(){go(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const o=t={callback:r,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!n||e===null||(n=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var Jt={notify(){},get:()=>[]};function So(e,t){let r,n=Jt,o=0,i=!1;function u(C){f();const y=n.subscribe(C);let p=!1;return()=>{p||(p=!0,y(),s())}}function c(){n.notify()}function l(){h.onStateChange&&h.onStateChange()}function a(){return i}function f(){o++,r||(r=e.subscribe(l),n=wo())}function s(){o--,r&&o===0&&(r(),r=void 0,n.clear(),n=Jt)}function d(){i||(i=!0,f())}function _(){i&&(i=!1,s())}const h={addNestedSub:u,notifyNestedSubs:c,handleChangeWrapper:l,isSubscribed:a,trySubscribe:d,tryUnsubscribe:_,getListeners:()=>n};return h}var Co=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Eo=Co(),Po=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ko=Po(),xo=()=>Eo||ko?Q:ie,Ro=xo(),Oo=Symbol.for("react-redux-context"),No=typeof globalThis<"u"?globalThis:{};function Mo(){if(!Z)return{};const e=No[Oo]??=new Map;let t=e.get(Z);return t||(t=Z(null),e.set(Z,t)),t}var xe=Mo();function $o(e){const{children:t,context:r,serverState:n,store:o}=e,i=G(()=>{const l=So(o);return{store:o,subscription:l,getServerState:n?()=>n:void 0}},[o,n]),u=G(()=>o.getState(),[o]);return Ro(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),u!==o.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,u]),A((r||xe).Provider,{value:i},t)}var To=$o;function Zr(e=xe){return function(){return Ae(e)}}var Do=Zr(),Ao=(e,t)=>e===t;function Io(e=xe){const t=e===xe?Do:Zr(e),r=(n,o={})=>{const{equalityFn:i=Ao}=typeof o=="function"?{equalityFn:o}:o,u=t(),{store:c,subscription:l,getServerState:a}=u;Te(!0);const f=De({[n.name](d){return n(d)}}[n.name],[n]),s=bo.useSyncExternalStoreWithSelector(l.addNestedSub,c.getState,a||c.getState,f,i);return Ie(s),s};return Object.assign(r,{withTypes:()=>r}),r}var Uo=Io();const wt=Dn({reducer:{llm:Gn}}),Lo=Uo,ee=wt.dispatch,er=e=>e(wt.getState());async function Fo(){const{CreateMLCEngine:e}=await ln(async()=>{const{CreateMLCEngine:t}=await import("./index-C3h5Fc2q.js");return{CreateMLCEngine:t}},[]);return{CreateMLCEngine:e}}let ot;async function Ho(e){ee(We("loading LLM library"));const{CreateMLCEngine:t}=await Fo();ee(We("loading model")),ot=await t(e,{initProgressCallback:r=>console.log(r?.text??r)}),ee(We("done"))}async function Wo(e){const t=er(u=>u.llm.messageHistory),r={role:"user",content:e};let n=[...t,r];if(ee(He(n)),!ot)throw new Error("Model not loaded");const o=await ot.chat.completions.create({messages:n,stream:!0,max_tokens:256}),i={role:"assistant",content:""};n=[...n,i],ee(He(n));for await(const u of o){const c=u?.choices?.[0]?.delta?.content??"";if(c){const a=[...er(s=>s.llm.messageHistory)],f=a.length-1;a[f]={...a[f],content:a[f].content+c},ee(He(a))}}}function jo(){const{downloadStatus:e,messageHistory:t}=Lo(u=>u.llm),[r,n]=K(!0),[o,i]=K("");return ie(()=>{"gpu"in navigator||n(!1)},[]),x(I,{children:[!r&&x("div",{style:{color:"orange",marginBottom:"10px"},children:"Warning: WebGPU is not available. WebLLM will use WASM fallback (much slower)."}),x("button",{onClick:()=>Ho("Llama-3.2-1B-Instruct-q4f16_1-MLC"),children:"Download model"}),x("br",{}),e,x("br",{}),x("br",{}),x("input",{value:o,onChange:u=>i(u.currentTarget.value)}),x("button",{onClick:()=>Wo(o),children:"Send"}),x("br",{}),x("br",{}),x("div",{children:t.map((u,c)=>x("div",{children:[u.role,":",x("br",{})," ",u.content,x("br",{}),x("br",{})]},c))})]})}re(x(To,{store:wt,children:x(jo,{})}),document.getElementById("app"));
